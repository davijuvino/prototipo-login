<app-header></app-header>

<div class="settings-container">
  <app-sidebar></app-sidebar>

  <main class="main-content">
    <div class="settings-header">
      <h1>Account Settings</h1>
      <p>Manage your account preferences</p>
    </div>

    <div class="settings-sections">
      <section class="settings-section">
        <h2>Change Password</h2>
        
        @if (isChangingPassword) {
          <form [formGroup]="passwordForm" class="settings-form">
            <div class="form-group">
              <label for="currentPassword">Current Password</label>
              <input type="password" id="currentPassword" formControlName="currentPassword">
              @if (passwordForm.get('currentPassword')?.invalid && passwordForm.get('currentPassword')?.touched) {
                <span class="error-message">Current password is required</span>
              }
            </div>

            <div class="form-group">
              <label for="newPassword">New Password</label>
              <input type="password" id="newPassword" formControlName="newPassword">
              @if (passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched) {
                <span class="error-message">Password must be at least 8 characters</span>
              }
            </div>

            <div class="form-group">
              <label for="confirmPassword">Confirm New Password</label>
              <input type="password" id="confirmPassword" formControlName="confirmPassword">
              @if (passwordForm.hasError('passwordMismatch')) {
                <span class="error-message">Passwords do not match</span>
              }
            </div>

            @if (passwordError) {
              <div class="error-message">{{ passwordError }}</div>
            }

            <div class="form-actions">
              <button type="button" class="secondary-button" (click)="isChangingPassword = false">Cancel</button>
              <button type="button" class="primary-button" (click)="changePassword()" [disabled]="passwordForm.invalid">
                Save Password
              </button>
            </div>
          </form>
        } @else {
          <button class="primary-button" (click)="isChangingPassword = true">Change Password</button>
        }
      </section>

      <section class="settings-section">
        <h2>Notification Preferences</h2>
        
        <form [formGroup]="notificationForm" class="settings-form">
          <div class="form-group checkbox-group">
            <label class="checkbox-container">
              <input type="checkbox" formControlName="emailNotifications">
              <span class="checkmark"></span>
              Email Notifications
            </label>
          </div>
          
          <div class="form-group checkbox-group">
            <label class="checkbox-container">
              <input type="checkbox" formControlName="pushNotifications">
              <span class="checkmark"></span>
              Push Notifications
            </label>
          </div>
          
          <div class="form-group checkbox-group">
            <label class="checkbox-container">
              <input type="checkbox" formControlName="newsletter">
              <span class="checkmark"></span>
              Subscribe to Newsletter
            </label>
          </div>
          
          <div class="form-actions">
            <button type="button" class="primary-button">Save Preferences</button>
          </div>
        </form>
      </section>

      <section class="settings-section danger-zone">
        <h2>Danger Zone</h2>
        <p>Deleting your account is permanent and cannot be undone.</p>
        <button class="danger-button">Delete Account</button>
      </section>
    </div>
  </main>
</div>